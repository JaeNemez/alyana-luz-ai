<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
    <title>Alyana Luz ¬∑ Bible AI</title>

    <style>
      * { box-sizing: border-box; }

      :root{
        --bg-0: #050316;
        --bg-1: #090424;

        --surface-0: rgba(12, 10, 29, 0.82);
        --surface-1: rgba(14, 12, 36, 0.74);
        --surface-2: rgba(18, 16, 48, 0.62);

        --border-0: rgba(255,255,255,0.12);
        --border-1: rgba(186,108,184,0.22);
        --border-2: rgba(186,108,184,0.30);

        --text-0: #f9f5ff;
        --text-1: rgba(249,245,255,0.88);
        --text-2: rgba(249,245,255,0.74);

        --accent: #9A4B9C;
        --accent-2: #A95CA9;
        --accent-3: #BA6CB8;

        --accent-dark: #2a1030;
        --accent-soft: rgba(154,75,156,0.22);

        --good: #22c55e;
        --danger: #e11d48;
        --ghost: rgba(255,255,255,0.10);

        --focus: rgba(186,108,184,0.55);
      }

      body {
        margin: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
        background: var(--bg-0);
        color: var(--text-0);
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
      }

      .app {
        width: 100%;
        max-width: 1000px;
        height: 92vh;
        display: flex;
        flex-direction: column;

        background:
          radial-gradient(circle at 28% 8%, rgba(186,108,184,0.55) 0, rgba(154,75,156,0.22) 22%, rgba(5,3,22,1) 60%),
          radial-gradient(circle at 80% 18%, rgba(169,92,169,0.22) 0, rgba(5,3,22,1) 55%);

        border-radius: 18px;
        border: 1px solid var(--border-0);
        box-shadow: 0 20px 60px rgba(0,0,0,0.6);
        overflow: hidden;
      }

      header {
        padding: 16px 24px 10px;
        border-bottom: 1px solid rgba(255,255,255,0.08);
        display: flex;
        flex-direction: column;
        gap: 4px;
        position: relative;
      }
      header h1 { margin: 0; font-size: 20px; display: flex; align-items: center; gap: 8px; }
      header h1 span.emoji { font-size: 22px; }
      header small { color: rgba(249,245,255,0.72); font-size: 12px; }

      .js-pill {
        position: absolute;
        right: 16px;
        top: 14px;
        padding: 6px 10px;
        border-radius: 999px;
        background: rgba(255,255,255,0.08);
        border: 1px solid rgba(186,108,184,0.22);
        font-size: 12px;
        font-weight: 800;
        white-space: nowrap;
        color: var(--text-1);
      }

      .top-cta {
        padding: 10px 24px 14px;
        border-bottom: 1px solid rgba(255,255,255,0.08);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        flex-wrap: wrap;
      }

      .support-btn {
        padding: 10px 16px;
        background: linear-gradient(135deg, var(--accent-2), var(--accent));
        border: 1px solid rgba(255,255,255,0.14);
        border-radius: 10px;
        font-size: 14px;
        font-weight: 800;
        cursor: pointer;
        color: #ffffff;
        box-shadow: 0 2px 10px rgba(0,0,0,0.25);
      }
      .support-btn:active { transform: translateY(1px); }

      .support-note {
        font-size: 11px;
        opacity: 0.85;
        max-width: 760px;
        text-align: center;
        margin: 0;
        color: var(--text-2);
        white-space: pre-line;
      }

      .account-row {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
        justify-content: center;
      }

      .pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        border-radius: 999px;
        background: rgba(255,255,255,0.08);
        border: 1px solid rgba(186,108,184,0.22);
        font-size: 12px;
        font-weight: 800;
        white-space: nowrap;
        color: var(--text-1);
      }

      .pill.ok { border-color: rgba(34,197,94,0.55); }
      .pill.warn { border-color: rgba(186,108,184,0.45); }
      .pill.bad { border-color: rgba(225,29,72,0.65); }

      .menu-bar {
        padding: 12px 18px;
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        justify-content: center;
        border-bottom: 1px solid rgba(255,255,255,0.08);
      }

      .menu-btn {
        padding: 8px 12px;
        border-radius: 999px;
        border: 1px solid rgba(186,108,184,0.16);
        font-size: 13px;
        font-weight: 800;
        cursor: pointer;
        background: rgba(255,255,255,0.07);
        color: var(--text-0);
        box-shadow: 0 1px 3px rgba(0,0,0,0.25);
      }
      .menu-btn.active {
        background: linear-gradient(135deg, var(--accent-2), var(--accent));
        border: 1px solid rgba(255,255,255,0.14);
        color: #ffffff;
      }

      .main { flex: 1; overflow: hidden; display: flex; flex-direction: column; min-height: 0; }
      .app-section { display: none; height: 100%; overflow: hidden; min-height: 0; }
      .app-section.active { display: flex; flex-direction: column; height: 100%; min-height: 0; }

      .section-body { flex: 1; overflow-y: auto; padding: 18px; min-height: 0; -webkit-overflow-scrolling: touch; }

      .card {
        background: var(--surface-1);
        border: 1px solid var(--border-1);
        border-radius: 16px;
        padding: 14px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      }
      .card + .card { margin-top: 12px; }
      .card h3, .card h4 { margin: 0 0 10px 0; color: rgba(255,255,255,0.92); }

      .muted { opacity: 0.85; font-size: 13px; color: var(--text-2); }
      .row { display: flex; gap: 10px; flex-wrap: wrap; }
      .row > * { flex: 1; min-width: 220px; }

      label { font-size: 12px; opacity: 0.9; color: var(--text-2); }

      input[type="text"], select, textarea {
        width: 100%;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid rgba(186,108,184,0.35);
        background: rgba(10, 8, 28, 0.72);
        color: var(--text-0);
        outline: none;
        font-size: 14px;
      }
      input[type="text"]:focus, select:focus, textarea:focus{
        border-color: var(--focus);
        box-shadow: 0 0 0 3px rgba(186,108,184,0.16);
      }

      textarea { min-height: 110px; resize: vertical; }

      .btn {
        padding: 10px 14px;
        border-radius: 12px;
        border: 1px solid rgba(186,108,184,0.18);
        cursor: pointer;
        font-weight: 900;
        font-size: 13px;
        color: #ffffff;
        background: rgba(255,255,255,0.08);
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--accent-2), var(--accent));
        border: 1px solid rgba(255,255,255,0.14);
        color: #ffffff;
      }
      .btn-primary:hover { filter: brightness(1.03); }

      .btn-danger { background: rgba(225,29,72,0.92); border-color: rgba(225,29,72,0.35); color: white; }
      .btn-green { background: rgba(34,197,94,0.92); border-color: rgba(34,197,94,0.30); color: #062a14; }
      .btn-ghost { background: rgba(255,255,255,0.07); color: white; border-color: rgba(186,108,184,0.18); }
      .btn:disabled { opacity: 0.6; cursor: default; }

      .saved-list button { width: 100%; text-align: left; margin-top: 8px; }

      .block {
        background: rgba(255,255,255,0.06);
        border: 1px solid rgba(186,108,184,0.18);
        border-radius: 14px;
        padding: 12px;
      }
      .block + .block { margin-top: 10px; }

      .divider {
        height: 1px;
        background: rgba(186,108,184,0.18);
        margin: 12px 0;
      }

      /* ===========================
         CHAT
         =========================== */
      .chat-layout {
        flex: 1;
        overflow: hidden;
        display: grid;
        grid-template-columns: 1fr 300px;
        gap: 12px;
        padding: 12px;
        min-height: 0;
      }

      @media (max-width: 920px) {
        .chat-layout {
          grid-template-columns: 1fr;
        }
      }

      #chat {
        flex: 1;
        min-height: 0;
        overflow-y: auto;
        padding: 12px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        border-radius: 16px;
        border: 1px solid rgba(186,108,184,0.22);
        background: rgba(10, 8, 28, 0.45);
        -webkit-overflow-scrolling: touch;
      }

      .bubble-row { display: flex; width: 100%; }
      .bubble-row.user { justify-content: flex-end; }
      .bubble-row.bot { justify-content: flex-start; }
      .bubble-row.system { justify-content: center; }

      .bubble {
        max-width: 84%;
        padding: 10px 14px;
        border-radius: 16px;
        font-size: 14px;
        line-height: 1.5;
        white-space: pre-wrap;
      }
      .bubble.user {
        background: linear-gradient(135deg, var(--accent-2), var(--accent));
        color: #ffffff;
        border-bottom-right-radius: 6px;
        border: 1px solid rgba(255,255,255,0.14);
      }
      .bubble.bot {
        background: rgba(10, 8, 28, 0.84);
        color: var(--text-1);
        border: 1px solid rgba(186,108,184,0.26);
        border-bottom-left-radius: 6px;
      }
      .bubble.system {
        background: transparent;
        border: none;
        color: rgba(249,245,255,0.55);
        font-size: 12px;
        text-align: center;
      }

      .chat-form {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        padding: 12px 12px 14px;
        border-top: 1px solid rgba(255,255,255,0.08);
        background: rgba(10, 8, 28, 0.92);
        border-radius: 16px;
      }

      .chat-form input[type="text"]{
        flex: 1 1 100%;
        min-width: 0;
        height: 48px;
        padding: 12px 16px;
        border-radius: 999px;
        font-size: 16px;
        background: rgba(10, 8, 28, 0.85);
      }

      .chat-form .btn{
        flex: 1 1 calc(50% - 5px);
        border-radius: 999px;
        padding: 12px 14px;
        font-size: 14px;
      }

      @media (max-width: 420px){
        .chat-form .btn{
          flex: 1 1 48%;
        }
      }

      #chatCard {
        display: flex;
        flex-direction: column;
        overflow: hidden;
        min-height: 0;
      }

      @media (max-width: 920px){
        #chatCard {
          min-height: 60vh;
        }
        .chat-form {
          position: sticky;
          bottom: 0;
          z-index: 5;
        }
      }

      /* ‚úÖ MOBILE: allow scrolling (FIX) */
      @media (max-width: 900px) {
        body {
          align-items: stretch;
          justify-content: flex-start;
          min-height: 100dvh;
        }

        .app {
          height: 100dvh;
          max-height: 100dvh;
          max-width: 100%;
          border-radius: 0;
        }

        /* IMPORTANT: let main + active section scroll */
        .main { overflow-y: auto; }
        .app-section { overflow: hidden; }
        .app-section.active { overflow-y: auto; }

        /* chat section needs its own scroll if content is tall */
        #chatSection.app-section.active { overflow-y: auto; }
        .chat-layout { min-height: 0; }
      }
    </style>
  </head>

  <body>
    <div class="app">
      <header>
        <h1><span class="emoji">üìñ</span> Alyana Luz ¬∑ Bible AI</h1>
        <small id="tagline">pray ‚Ä¢ learn ‚Ä¢ walk in the Light</small>
        <span class="js-pill" id="jsStatus">JS: loading‚Ä¶</span>
      </header>

      <div class="top-cta">
        <button class="support-btn" id="supportBtn" type="button">
          ‚ù§Ô∏è <span id="supportBtnText">Support Alyana Luz</span>
        </button>

        <div class="account-row" aria-label="Account and billing">
          <span class="pill warn" id="authPill">Account: checking‚Ä¶</span>
          <button class="btn btn-ghost" id="manageBillingBtn" type="button" disabled>
            <span id="manageBillingText">Manage billing</span>
          </button>
          <button class="btn btn-danger" id="logoutBtn" type="button" style="display:none;">
            <span id="logoutText">Logout</span>
          </button>

          <label style="min-width:170px;">
            <span class="muted" id="uiLangLabel" style="display:block; margin-bottom:4px;">Language</span>
            <select id="uiLangSelect">
              <option value="en">English</option>
              <option value="es">Espa√±ol</option>
            </select>
          </label>
        </div>

        <p class="support-note" id="supportNote">
          Your support helps maintain and grow Alyana Luz ‚Äî continually improving development and expanding this ministry.
          <br />
          To access premium features, subscribe with Support, or restore access using the email you used on Stripe.
        </p>

        <div class="row" style="max-width:760px; width:100%; justify-content:center;">
          <div style="flex:1; min-width:240px; max-width:360px;">
            <input id="loginEmail" type="text" placeholder="Email used for Stripe‚Ä¶" />
          </div>
          <div style="flex:0; min-width:180px;">
            <button class="btn btn-primary" id="loginBtn" type="button" style="width:100%;">
              <span id="restoreBtnText">Restore access</span>
            </button>
          </div>
        </div>

        <div class="muted" id="authHint" style="width:100%; text-align:center; display:none;"></div>
      </div>

      <nav class="menu-bar">
        <button class="menu-btn active" data-target="chatSection" type="button" id="tabChat">Chat</button>
        <button class="menu-btn" data-target="bibleSection" type="button" id="tabBible">Read Bible</button>
        <button class="menu-btn" data-target="devotionalSection" type="button" id="tabDev">Devotional</button>
        <button class="menu-btn" data-target="prayerSection" type="button" id="tabPrayer">Daily Prayer</button>
      </nav>

      <div class="main">
        <!-- CHAT -->
        <section id="chatSection" class="app-section active">
          <div class="chat-layout">
            <div class="card" id="chatCard">
              <div class="row" style="align-items:center; margin-bottom:10px;">
                <div style="flex:2;">
                  <h3 style="margin:0 0 4px 0;" id="chatTitle">Chat</h3>
                  <div class="muted" id="chatSub">Saved chat logs are stored on this device.</div>
                </div>

                <div style="display:flex; justify-content:flex-end; gap:10px; flex-wrap:wrap; align-items:center;">
                  <label style="min-width:170px;">
                    <span class="muted" id="chatLangLabel" style="display:block; margin-bottom:4px;">Chat Language</span>
                    <select id="chatLangSelect">
                      <option value="auto" selected>Auto (based on what they type)</option>
                      <option value="en">English</option>
                      <option value="es">Spanish</option>
                    </select>
                  </label>
                  <span class="pill" id="chatVoicePill">Voice: ready</span>
                </div>
              </div>

              <div id="chat"></div>

              <form id="chatForm" class="chat-form">
                <input
                  id="chatInput"
                  type="text"
                  autocomplete="off"
                  placeholder="Ask for a prayer, verse, or ‚Äòverses about forgiveness‚Äô‚Ä¶"
                />
                <button class="btn btn-primary" type="submit" id="chatSendBtn">Send</button>
                <button class="btn btn-ghost" type="button" id="chatListenBtn">Listen</button>
                <button class="btn btn-danger" type="button" id="chatStopBtn">Stop</button>
                <button class="btn btn-ghost" type="button" id="chatNewBtn">New</button>
                <button class="btn btn-green" type="button" id="chatSaveBtn">Save</button>
              </form>
            </div>

            <div class="card" style="overflow:auto;">
              <h4 style="margin-bottom:6px;" id="savedChatsTitle">Saved Chats</h4>
              <div class="muted" id="savedChatsSub">Load or delete any saved chat.</div>
              <div class="saved-list" id="chatSavedList" style="margin-top:10px;">
                <small style="opacity:0.75;" id="noSavedChats">No saved chats yet.</small>
              </div>
            </div>
          </div>
        </section>

        <!-- BIBLE READER -->
        <section id="bibleSection" class="app-section">
          <div class="section-body">
            <div class="card">
              <div class="row" style="align-items:flex-end;">
                <div style="flex:2; min-width:260px;">
                  <h3 style="margin-bottom:6px;" id="bibleTitle">Bible Reader (Listen)</h3>
                  <div class="muted" id="bibleSub">Pick a book/chapter and verse range, or Full Chapter.</div>
                </div>
                <div style="display:flex; justify-content:flex-end;">
                  <span class="pill" id="ttsStatus">Voice: ready</span>
                </div>
              </div>

              <div class="row" style="margin-top:12px;">
                <div style="flex:2;">
                  <label id="labelBook">Book</label>
                  <select id="bookSelect">
                    <option value="">Loading‚Ä¶</option>
                  </select>
                </div>

                <div>
                  <label id="labelChapter">Chapter</label>
                  <select id="chapterSelect">
                    <option value="">‚Äî</option>
                  </select>
                </div>

                <div>
                  <label id="labelVerseStart">Verse (start)</label>
                  <select id="verseStartSelect">
                    <option value="">‚Äî</option>
                  </select>
                </div>

                <div>
                  <label id="labelVerseEnd">Verse (end)</label>
                  <select id="verseEndSelect">
                    <option value="">(optional)</option>
                  </select>
                </div>
              </div>

              <div class="row" style="margin-top:12px; align-items:flex-end;">
                <div>
                  <label id="labelReaderLang">Reader Language</label>
                  <select id="readingVoice">
                    <option value="en" selected>English</option>
                    <option value="es">Spanish</option>
                  </select>
                  <div class="muted" id="readerLangNote" style="font-size:12px; margin-top:6px;">
                    Only two voices, locked for consistency.
                  </div>
                </div>

                <div style="min-width:220px;">
                  <label style="display:flex; gap:10px; align-items:center;">
                    <input type="checkbox" id="fullChapter" />
                    <span id="fullChapterText">Full Chapter</span>
                  </label>
                  <div class="muted" id="fullChapterNote" style="font-size:12px; margin-top:6px;">
                    If Full Chapter is on, verses are ignored.
                  </div>
                </div>

                <div>
                  <label id="labelVersion">Version label (English only)</label>
                  <select id="versionSelect">
                    <option value="KJV" selected>KJV</option>
                    <option value="NKJV">NKJV</option>
                    <option value="NIV">NIV</option>
                    <option value="NLT">NLT</option>
                    <option value="ESV">ESV</option>
                    <option value="NASB">NASB</option>
                    <option value="CSB">CSB</option>
                    <option value="AMP">AMP</option>
                    <option value="MSG">MSG</option>
                  </select>
                  <div class="muted" id="versionNote" style="font-size:12px; margin-top:6px;">
                    For Spanish voice, we do not speak the version label.
                  </div>
                </div>
              </div>

              <div class="row" style="margin-top:12px;">
                <div style="width:100%; display:flex; gap:10px; flex-wrap:wrap;">
                  <button class="btn btn-primary" id="readBibleBtn" type="button" style="flex: 1; min-width: 220px;">
                    <span id="readBtnText">Read</span>
                  </button>
                  <button class="btn btn-ghost" id="listenBible" type="button">Listen</button>
                  <button class="btn btn-danger" id="stopBible" type="button">Stop</button>
                </div>
              </div>

              <div class="muted" id="bibleBottomNote" style="font-size:12px; margin-top:10px;">
                Spanish voice reads ONLY verse text (no English labels), so it stays pure Spanish.
              </div>
            </div>

            <div class="card">
              <h4 id="dbStatusTitle">Bible DB Status</h4>
              <div class="muted" id="bibleDbStatus">Checking‚Ä¶</div>
            </div>

            <div class="card">
              <h4 id="passageTitle">Passage</h4>
              <div class="muted" id="passageRef">‚Äî</div>
              <div id="passageText" style="white-space:pre-wrap; margin-top:10px;">‚Äî</div>
            </div>
          </div>
        </section>

        <!-- DEVOTIONAL -->
        <section id="devotionalSection" class="app-section">
          <div class="section-body">
            <div class="card">
              <div class="row" style="align-items:flex-end;">
                <div style="flex:2;">
                  <h3 style="margin:0 0 6px 0;" id="devTitle">Devotional</h3>
                  <div class="muted" id="devIntro">
                    Alyana gives short starter examples. You write and save your real devotional.
                  </div>
                </div>

                <div style="display:flex; justify-content:flex-end; gap:10px; align-items:center; flex-wrap:wrap;">
                  <span class="pill" id="devStreakPill">Streak: 0</span>
                  <button class="btn btn-ghost" id="devStreakBtn" type="button">I did it today</button>

                  <button class="btn btn-primary" id="devotionalBtn" type="button">Generate</button>
                  <button class="btn btn-green" id="devSaveBtn" type="button">Save</button>
                </div>
              </div>

              <div class="block" style="margin-top:12px;">
                <div class="muted" id="devLabelTheme" style="margin-bottom:6px;">Theme / Title (Alyana)</div>
                <div id="devTheme" style="white-space:pre-wrap;">‚Äî</div>
              </div>

              <div class="block">
                <div class="muted" id="devLabelScripture" style="margin-bottom:6px;">Scripture (Alyana)</div>
                <div id="devScriptureRef" class="muted" style="margin-bottom:8px;">‚Äî</div>
                <div id="devScriptureText" style="white-space:pre-wrap;">‚Äî</div>
              </div>

              <div class="divider"></div>

              <div class="block">
                <div class="muted" id="devLabelCtxA" style="margin-bottom:6px;">Alyana Starter ‚Äî Context / Observation</div>
                <div id="devStarterContext" style="white-space:pre-wrap;">‚Äî</div>
                <div class="muted" id="devNow1" style="font-size:12px; margin-top:8px;">Now write yours:</div>
                <textarea id="devMyContext" placeholder="Context / Observation (What‚Äôs happening? Who is speaking? Why does it matter?)"></textarea>
              </div>

              <div class="block">
                <div class="muted" id="devLabelRefA" style="margin-bottom:6px;">Alyana Starter ‚Äî Reflection / Insight</div>
                <div id="devStarterReflection" style="white-space:pre-wrap;">‚Äî</div>
                <div class="muted" id="devNow2" style="font-size:12px; margin-top:8px;">Now write yours:</div>
                <textarea id="devMyReflection" placeholder="Reflection / Insight (What does this reveal about God? About me?)"></textarea>
              </div>

              <div class="block">
                <div class="muted" id="devLabelAppA" style="margin-bottom:6px;">Alyana Starter ‚Äî Application (Practical)</div>
                <div id="devStarterApplication" style="white-space:pre-wrap;">‚Äî</div>
                <div class="muted" id="devNow3" style="font-size:12px; margin-top:8px;">Now write yours:</div>
                <textarea id="devMyApplication" placeholder="Application (What will I do today because of this?)"></textarea>
              </div>

              <div class="block">
                <div class="muted" id="devLabelPrA" style="margin-bottom:6px;">Alyana Starter ‚Äî Prayer</div>
                <div id="devStarterPrayer" style="white-space:pre-wrap;">‚Äî</div>
                <div class="muted" id="devNow4" style="font-size:12px; margin-top:8px;">Now write your real prayer:</div>
                <textarea id="devMyPrayer" placeholder="Prayer (write your real prayer here)"></textarea>
              </div>

              <div class="block">
                <div class="muted" id="devLabelNotes" style="margin-bottom:6px;">Notes / Reflection (optional)</div>
                <textarea id="devMyNotes" placeholder="Notes‚Ä¶"></textarea>
              </div>

              <div class="muted" id="devReqNote" style="font-size:12px; margin-top:10px;">
                Required to save (streak): Context + Reflection + Application + Prayer.
              </div>
            </div>

            <div class="card">
              <h4 id="devSavedTitle">Saved Devotionals</h4>
              <div class="muted" id="devSavedSub">Load or delete past devotionals saved on this device.</div>
              <div class="saved-list" id="devSavedList" style="margin-top:10px;">
                <small style="opacity:0.75;" id="devNone">No saved devotionals yet.</small>
              </div>
            </div>
          </div>
        </section>

        <!-- DAILY PRAYER -->
        <section id="prayerSection" class="app-section">
          <div class="section-body">
            <div class="card">
              <div class="row" style="align-items:flex-end;">
                <div style="flex:2;">
                  <h3 style="margin:0 0 6px 0;" id="prTitle">Daily Prayer</h3>
                  <div class="muted" id="prIntro">
                    Alyana gives a short starter example. You write and save your real prayer.
                  </div>
                </div>

                <div style="display:flex; justify-content:flex-end; gap:10px; align-items:center; flex-wrap:wrap;">
                  <span class="pill" id="prStreakPill">Streak: 0</span>
                  <button class="btn btn-ghost" id="prStreakBtn" type="button">I did it today</button>

                  <button class="btn btn-primary" id="prayerBtn" type="button">Generate Starters</button>
                  <button class="btn btn-green" id="prSaveBtn" type="button">Save</button>
                </div>
              </div>

              <div class="block" style="margin-top:12px;">
                <div class="muted" id="prLabelA" style="margin-bottom:6px;">Alyana Starter ‚Äî Adoration</div>
                <div id="pA" style="white-space:pre-wrap;">‚Äî</div>
                <div class="muted" id="prNow1" style="font-size:12px; margin-top:8px;">Now write your own:</div>
                <textarea id="myAdoration" placeholder="Adoration (praise God for who He is)‚Ä¶"></textarea>
              </div>

              <div class="block">
                <div class="muted" id="prLabelC" style="margin-bottom:6px;">Alyana Starter ‚Äî Confession</div>
                <div id="pC" style="white-space:pre-wrap;">‚Äî</div>
                <div class="muted" id="prNow2" style="font-size:12px; margin-top:8px;">Now write your own:</div>
                <textarea id="myConfession" placeholder="Confession (what I need to confess)‚Ä¶"></textarea>
              </div>

              <div class="block">
                <div class="muted" id="prLabelT" style="margin-bottom:6px;">Alyana Starter ‚Äî Thanksgiving</div>
                <div id="pT" style="white-space:pre-wrap;">‚Äî</div>
                <div class="muted" id="prNow3" style="font-size:12px; margin-top:8px;">Now write your own:</div>
                <textarea id="myThanksgiving" placeholder="Thanksgiving (what I‚Äôm grateful for)‚Ä¶"></textarea>
              </div>

              <div class="block">
                <div class="muted" id="prLabelS" style="margin-bottom:6px;">Alyana Starter ‚Äî Supplication</div>
                <div id="pS" style="white-space:pre-wrap;">‚Äî</div>
                <div class="muted" id="prNow4" style="font-size:12px; margin-top:8px;">Now write your own:</div>
                <textarea id="mySupplication" placeholder="Supplication (requests for myself/others)‚Ä¶"></textarea>
              </div>

              <div class="block">
                <div class="muted" id="prLabelN" style="margin-bottom:6px;">Notes</div>
                <textarea id="prayerNotes" placeholder="Notes‚Ä¶"></textarea>
              </div>
            </div>

            <div class="card">
              <h4 id="prSavedTitle">Saved Prayers</h4>
              <div class="muted" id="prSavedSub">Load or delete past prayers saved on this device.</div>
              <div class="saved-list" id="prSavedList" style="margin-top:10px;">
                <small style="opacity:0.75;" id="prNone">No saved prayers yet.</small>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>

    <script src="/app.js" defer></script>

    <!-- Language switcher (no need to edit app.js) -->
    <script>
      (function () {
        const $ = (id) => document.getElementById(id);

        const TEXT = {
          en: {
            tagline: "pray ‚Ä¢ learn ‚Ä¢ walk in the Light",
            language: "Language",
            support: "Support Alyana Luz",
            manageBilling: "Manage billing",
            logout: "Logout",
            supportNote:
              "Your support helps maintain and grow Alyana Luz ‚Äî continually improving development and expanding this ministry.\nTo access premium features, subscribe with Support, or restore access using the email you used on Stripe.",
            loginPlaceholder: "Email used for Stripe‚Ä¶",
            restoreAccess: "Restore access",

            tabChat: "Chat",
            tabBible: "Read Bible",
            tabDev: "Devotional",
            tabPrayer: "Daily Prayer",

            chatTitle: "Chat",
            chatSub: "Saved chat logs are stored on this device.",
            chatLangLabel: "Chat Language",
            chatAuto: "Auto (based on what they type)",
            chatInputPH: "Ask for a prayer, verse, or ‚Äòverses about forgiveness‚Äô‚Ä¶",
            send: "Send",
            listen: "Listen",
            stop: "Stop",
            newChat: "New",
            save: "Save",
            savedChatsTitle: "Saved Chats",
            savedChatsSub: "Load or delete any saved chat.",
            noSavedChats: "No saved chats yet.",

            devTitle: "Devotional",
            devIntro: "Alyana gives short starter examples. You write and save your real devotional.",
            devTheme: "Theme / Title (Alyana)",
            devScripture: "Scripture (Alyana)",
            devCtxA: "Alyana Starter ‚Äî Context / Observation",
            devRefA: "Alyana Starter ‚Äî Reflection / Insight",
            devAppA: "Alyana Starter ‚Äî Application (Practical)",
            devPrA: "Alyana Starter ‚Äî Prayer",
            devNotes: "Notes / Reflection (optional)",
            nowWrite: "Now write yours:",
            nowWritePrayer: "Now write your real prayer:",
            devPH_ctx: "Context / Observation (What‚Äôs happening? Who is speaking? Why does it matter?)",
            devPH_ref: "Reflection / Insight (What does this reveal about God? About me?)",
            devPH_app: "Application (What will I do today because of this?)",
            devPH_pr: "Prayer (write your real prayer here)",
            devPH_notes: "Notes‚Ä¶",
            devReq: "Required to save (streak): Context + Reflection + Application + Prayer.",
            devSavedTitle: "Saved Devotionals",
            devSavedSub: "Load or delete past devotionals saved on this device.",
            devNone: "No saved devotionals yet.",
            didToday: "I did it today",
            generate: "Generate",

            prTitle: "Daily Prayer",
            prIntro: "Alyana gives a short starter example. You write and save your real prayer.",
            prA: "Alyana Starter ‚Äî Adoration",
            prC: "Alyana Starter ‚Äî Confession",
            prT: "Alyana Starter ‚Äî Thanksgiving",
            prS: "Alyana Starter ‚Äî Supplication",
            prN: "Notes",
            prNow: "Now write your own:",
            prPH_A: "Adoration (praise God for who He is)‚Ä¶",
            prPH_C: "Confession (what I need to confess)‚Ä¶",
            prPH_T: "Thanksgiving (what I‚Äôm grateful for)‚Ä¶",
            prPH_S: "Supplication (requests for myself/others)‚Ä¶",
            prPH_N: "Notes‚Ä¶",
            prSavedTitle: "Saved Prayers",
            prSavedSub: "Load or delete past prayers saved on this device.",
            prNone: "No saved prayers yet.",
            generateStarters: "Generate Starters",

            bibleTitle: "Bible Reader (Listen)",
            bibleSub: "Pick a book/chapter and verse range, or Full Chapter.",
            labelBook: "Book",
            labelChapter: "Chapter",
            labelVerseStart: "Verse (start)",
            labelVerseEnd: "Verse (end)",
            labelReaderLang: "Reader Language",
            readerLangNote: "Only two voices, locked for consistency.",
            fullChapterText: "Full Chapter",
            fullChapterNote: "If Full Chapter is on, verses are ignored.",
            labelVersion: "Version label (English only)",
            versionNote: "For Spanish voice, we do not speak the version label.",
            readBtn: "Read",
            listenBtn: "Listen",
            stopBtn: "Stop",
            bibleBottomNote: "Spanish voice reads ONLY verse text (no English labels), so it stays pure Spanish.",
            dbStatusTitle: "Bible DB Status",
            passageTitle: "Passage"
          },
          es: {
            tagline: "orar ‚Ä¢ aprender ‚Ä¢ camina en la Luz",
            language: "Idioma",
            support: "Apoya a Alyana Luz",
            manageBilling: "Administrar facturaci√≥n",
            logout: "Salir",
            supportNote:
              "Tu apoyo ayuda a mantener y hacer crecer Alyana Luz ‚Äî mejorando el desarrollo y expandiendo este ministerio.\nPara acceder a funciones premium, suscr√≠bete con Apoyo, o restaura el acceso usando el correo que usaste en Stripe.",
            loginPlaceholder: "Correo usado en Stripe‚Ä¶",
            restoreAccess: "Restaurar acceso",

            tabChat: "Chat",
            tabBible: "Leer Biblia",
            tabDev: "Devocional",
            tabPrayer: "Oraci√≥n diaria",

            chatTitle: "Chat",
            chatSub: "Los chats guardados se almacenan en este dispositivo.",
            chatLangLabel: "Idioma del chat",
            chatAuto: "Auto (seg√∫n lo que escriba)",
            chatInputPH: "Pide una oraci√≥n, un vers√≠culo o ‚Äòvers√≠culos sobre el perd√≥n‚Äô‚Ä¶",
            send: "Enviar",
            listen: "Escuchar",
            stop: "Detener",
            newChat: "Nuevo",
            save: "Guardar",
            savedChatsTitle: "Chats guardados",
            savedChatsSub: "Carga o elimina cualquier chat guardado.",
            noSavedChats: "A√∫n no hay chats guardados.",

            devTitle: "Devocional",
            devIntro: "Alyana da ejemplos cortos para empezar. T√∫ escribes y guardas tu devocional real.",
            devTheme: "Tema / T√≠tulo (Alyana)",
            devScripture: "Escritura (Alyana)",
            devCtxA: "Inicio de Alyana ‚Äî Contexto / Observaci√≥n",
            devRefA: "Inicio de Alyana ‚Äî Reflexi√≥n / Insight",
            devAppA: "Inicio de Alyana ‚Äî Aplicaci√≥n (Pr√°ctica)",
            devPrA: "Inicio de Alyana ‚Äî Oraci√≥n",
            devNotes: "Notas / Reflexi√≥n (opcional)",
            nowWrite: "Ahora escribe el tuyo:",
            nowWritePrayer: "Ahora escribe tu oraci√≥n real:",
            devPH_ctx: "Contexto / Observaci√≥n (¬øQu√© est√° pasando? ¬øQui√©n habla? ¬øPor qu√© importa?)",
            devPH_ref: "Reflexi√≥n / Insight (¬øQu√© revela esto sobre Dios? ¬øSobre m√≠?)",
            devPH_app: "Aplicaci√≥n (¬øQu√© har√© hoy por causa de esto?)",
            devPH_pr: "Oraci√≥n (escribe aqu√≠ tu oraci√≥n real)",
            devPH_notes: "Notas‚Ä¶",
            devReq: "Requerido para guardar (racha): Contexto + Reflexi√≥n + Aplicaci√≥n + Oraci√≥n.",
            devSavedTitle: "Devocionales guardados",
            devSavedSub: "Carga o elimina devocionales guardados en este dispositivo.",
            devNone: "A√∫n no hay devocionales guardados.",
            didToday: "Lo hice hoy",
            generate: "Generar",

            prTitle: "Oraci√≥n diaria",
            prIntro: "Alyana da un ejemplo corto para empezar. T√∫ escribes y guardas tu oraci√≥n real.",
            prA: "Inicio de Alyana ‚Äî Adoraci√≥n",
            prC: "Inicio de Alyana ‚Äî Confesi√≥n",
            prT: "Inicio de Alyana ‚Äî Gratitud",
            prS: "Inicio de Alyana ‚Äî S√∫plica",
            prN: "Notas",
            prNow: "Ahora escribe la tuya:",
            prPH_A: "Adoraci√≥n (alaba a Dios por quien √âl es)‚Ä¶",
            prPH_C: "Confesi√≥n (lo que necesito confesar)‚Ä¶",
            prPH_T: "Gratitud (por lo que estoy agradecido)‚Ä¶",
            prPH_S: "S√∫plica (peticiones por m√≠/otros)‚Ä¶",
            prPH_N: "Notas‚Ä¶",
            prSavedTitle: "Oraciones guardadas",
            prSavedSub: "Carga o elimina oraciones guardadas en este dispositivo.",
            prNone: "A√∫n no hay oraciones guardadas.",
            generateStarters: "Generar inicios",

            bibleTitle: "Lector de Biblia (Escuchar)",
            bibleSub: "Elige un libro/cap√≠tulo y rango de vers√≠culos, o Cap√≠tulo completo.",
            labelBook: "Libro",
            labelChapter: "Cap√≠tulo",
            labelVerseStart: "Vers√≠culo (inicio)",
            labelVerseEnd: "Vers√≠culo (fin)",
            labelReaderLang: "Idioma del lector",
            readerLangNote: "Solo dos voces, fijadas para consistencia.",
            fullChapterText: "Cap√≠tulo completo",
            fullChapterNote: "Si Cap√≠tulo completo est√° activo, se ignoran los vers√≠culos.",
            labelVersion: "Etiqueta de versi√≥n (solo ingl√©s)",
            versionNote: "En voz espa√±ola, no se menciona la etiqueta de versi√≥n.",
            readBtn: "Leer",
            listenBtn: "Escuchar",
            stopBtn: "Detener",
            bibleBottomNote: "La voz en espa√±ol lee SOLO el texto del vers√≠culo (sin etiquetas en ingl√©s).",
            dbStatusTitle: "Estado de la BD b√≠blica",
            passageTitle: "Pasaje"
          }
        };

        function setText(id, value) {
          const el = $(id);
          if (!el) return;
          el.textContent = value;
        }

        function setPH(id, value) {
          const el = $(id);
          if (!el) return;
          el.setAttribute("placeholder", value);
        }

        function applyLang(lang) {
          const t = TEXT[lang] || TEXT.en;

          setText("tagline", t.tagline);
          setText("uiLangLabel", t.language);
          setText("supportBtnText", t.support);
          setText("manageBillingText", t.manageBilling);
          setText("logoutText", t.logout);
          setText("supportNote", t.supportNote);

          setPH("loginEmail", t.loginPlaceholder);
          setText("restoreBtnText", t.restoreAccess);

          setText("tabChat", t.tabChat);
          setText("tabBible", t.tabBible);
          setText("tabDev", t.tabDev);
          setText("tabPrayer", t.tabPrayer);

          setText("chatTitle", t.chatTitle);
          setText("chatSub", t.chatSub);
          setText("chatLangLabel", t.chatLangLabel);
          const chatLang = $("chatLangSelect");
          if (chatLang) {
            const optAuto = chatLang.querySelector('option[value="auto"]');
            if (optAuto) optAuto.textContent = t.chatAuto;
          }
          setPH("chatInput", t.chatInputPH);

          setText("chatSendBtn", t.send);
          setText("chatListenBtn", t.listen);
          setText("chatStopBtn", t.stop);
          setText("chatNewBtn", t.newChat);
          setText("chatSaveBtn", t.save);

          setText("savedChatsTitle", t.savedChatsTitle);
          setText("savedChatsSub", t.savedChatsSub);
          setText("noSavedChats", t.noSavedChats);

          setText("devTitle", t.devTitle);
          setText("devIntro", t.devIntro);
          setText("devLabelTheme", t.devTheme);
          setText("devLabelScripture", t.devScripture);
          setText("devLabelCtxA", t.devCtxA);
          setText("devLabelRefA", t.devRefA);
          setText("devLabelAppA", t.devAppA);
          setText("devLabelPrA", t.devPrA);
          setText("devLabelNotes", t.devNotes);

          setText("devNow1", t.nowWrite);
          setText("devNow2", t.nowWrite);
          setText("devNow3", t.nowWrite);
          setText("devNow4", t.nowWritePrayer);

          setPH("devMyContext", t.devPH_ctx);
          setPH("devMyReflection", t.devPH_ref);
          setPH("devMyApplication", t.devPH_app);
          setPH("devMyPrayer", t.devPH_pr);
          setPH("devMyNotes", t.devPH_notes);

          setText("devReqNote", t.devReq);

          setText("devSavedTitle", t.devSavedTitle);
          setText("devSavedSub", t.devSavedSub);
          setText("devNone", t.devNone);

          const devStreakBtn = $("devStreakBtn");
          if (devStreakBtn) devStreakBtn.textContent = t.didToday;
          const devBtn = $("devotionalBtn");
          if (devBtn) devBtn.textContent = t.generate;
          const devSaveBtn = $("devSaveBtn");
          if (devSaveBtn) devSaveBtn.textContent = t.save;

          setText("prTitle", t.prTitle);
          setText("prIntro", t.prIntro);

          setText("prLabelA", t.prA);
          setText("prLabelC", t.prC);
          setText("prLabelT", t.prT);
          setText("prLabelS", t.prS);
          setText("prLabelN", t.prN);

          setText("prNow1", t.prNow);
          setText("prNow2", t.prNow);
          setText("prNow3", t.prNow);
          setText("prNow4", t.prNow);

          setPH("myAdoration", t.prPH_A);
          setPH("myConfession", t.prPH_C);
          setPH("myThanksgiving", t.prPH_T);
          setPH("mySupplication", t.prPH_S);
          setPH("prayerNotes", t.prPH_N);

          const prStreakBtn = $("prStreakBtn");
          if (prStreakBtn) prStreakBtn.textContent = t.didToday;

          const prayerBtn = $("prayerBtn");
          if (prayerBtn) prayerBtn.textContent = t.generateStarters;

          const prSaveBtn = $("prSaveBtn");
          if (prSaveBtn) prSaveBtn.textContent = t.save;

          setText("prSavedTitle", t.prSavedTitle);
          setText("prSavedSub", t.prSavedSub);
          setText("prNone", t.prNone);

          setText("bibleTitle", t.bibleTitle);
          setText("bibleSub", t.bibleSub);
          setText("labelBook", t.labelBook);
          setText("labelChapter", t.labelChapter);
          setText("labelVerseStart", t.labelVerseStart);
          setText("labelVerseEnd", t.labelVerseEnd);
          setText("labelReaderLang", t.labelReaderLang);
          setText("readerLangNote", t.readerLangNote);
          setText("fullChapterText", t.fullChapterText);
          setText("fullChapterNote", t.fullChapterNote);
          setText("labelVersion", t.labelVersion);
          setText("versionNote", t.versionNote);

          setText("readBtnText", t.readBtn);
          const listenBible = $("listenBible");
          if (listenBible) listenBible.textContent = t.listenBtn;
          const stopBible = $("stopBible");
          if (stopBible) stopBible.textContent = t.stopBtn;

          setText("bibleBottomNote", t.bibleBottomNote);
          setText("dbStatusTitle", t.dbStatusTitle);
          setText("passageTitle", t.passageTitle);
        }

        function init() {
          const uiSelect = $("uiLangSelect");
          if (!uiSelect) return;

          applyLang((uiSelect.value || "en").toLowerCase());

          uiSelect.addEventListener("change", () => {
            applyLang((uiSelect.value || "en").toLowerCase());
          });
        }

        document.addEventListener("DOMContentLoaded", init);
      })();
    </script>
  </body>
</html>



