<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
    <title>Alyana Luz ¬∑ Bible AI</title>

    <style>
      * { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        color: rgba(255,255,255,0.92);
        background:
          radial-gradient(1200px 700px at 30% 15%, rgba(186,108,184,0.35), transparent 55%),
          radial-gradient(1000px 600px at 70% 10%, rgba(120,93,255,0.25), transparent 55%),
          linear-gradient(180deg, #050316, #090424 70%, #050316);
        overflow-x: hidden;
      }

      :root{
        --bg-0: #050316;
        --bg-1: #090424;

        --surface-0: rgba(12, 10, 29, 0.82);
        --surface-1: rgba(14, 12, 36, 0.74);
        --surface-2: rgba(18, 16, 48, 0.62);

        --border-0: rgba(255,255,255,0.12);
        --border-1: rgba(186,108,184,0.22);
        --border-2: rgba(186,108,184,0.30);

        --text-0: rgba(255,255,255,0.92);
        --text-1: rgba(255,255,255,0.78);
        --text-2: rgba(255,255,255,0.62);

        --accent: rgba(186,108,184,0.9);
        --accent-2: rgba(120,93,255,0.85);
        --danger: rgba(255, 90, 130, 0.95);
        --good: rgba(35, 215, 125, 0.95);

        --r-lg: 20px;
        --r-md: 14px;
        --shadow: 0 18px 60px rgba(0,0,0,0.55);
      }

      .wrap {
        width: min(1150px, 94vw);
        margin: 26px auto 40px;
      }

      .card {
        background: linear-gradient(180deg, var(--surface-0), var(--surface-1));
        border: 1px solid var(--border-1);
        border-radius: var(--r-lg);
        box-shadow: var(--shadow);
        overflow: hidden;
      }

      header.app-header{
        padding: 18px 18px 12px;
        border-bottom: 1px solid rgba(255,255,255,0.08);
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 12px;
      }
      .brand {
        display: flex;
        gap: 10px;
        align-items: center;
      }
      .brand h1{
        font-size: 18px;
        margin: 0;
        letter-spacing: 0.2px;
      }
      .brand small{
        display: block;
        margin-top: 2px;
        color: var(--text-2);
        letter-spacing: 0.2px;
      }
      .pill {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid rgba(255,255,255,0.12);
        background: rgba(255,255,255,0.06);
        color: var(--text-1);
        font-size: 12px;
        white-space: nowrap;
      }

      .top-actions{
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
        justify-content: flex-end;
      }

      .support {
        padding: 14px 18px 18px;
        border-bottom: 1px solid rgba(255,255,255,0.08);
      }

      .support-row{
        display: grid;
        grid-template-columns: 1fr auto auto;
        gap: 10px;
        align-items: center;
      }

      .support p{
        margin: 10px 0 0;
        color: var(--text-2);
        font-size: 13px;
        line-height: 1.35;
        white-space: pre-line;
      }

      .input {
        width: 100%;
        padding: 11px 12px;
        border-radius: 12px;
        background: rgba(0,0,0,0.20);
        border: 1px solid rgba(255,255,255,0.12);
        color: var(--text-0);
        outline: none;
      }
      .input::placeholder{ color: rgba(255,255,255,0.40); }

      .btn{
        border: 1px solid rgba(255,255,255,0.16);
        background: rgba(255,255,255,0.06);
        color: var(--text-0);
        padding: 10px 14px;
        border-radius: 14px;
        cursor: pointer;
        font-weight: 600;
        letter-spacing: 0.2px;
        transition: transform 0.06s ease, background 0.15s ease;
        user-select: none;
      }
      .btn:active{ transform: translateY(1px); }
      .btn-primary{
        background: linear-gradient(90deg, rgba(186,108,184,0.85), rgba(120,93,255,0.75));
        border-color: rgba(255,255,255,0.16);
      }
      .btn-danger{
        background: rgba(255,90,130,0.14);
        border-color: rgba(255,90,130,0.35);
      }
      .btn-good{
        background: rgba(35,215,125,0.14);
        border-color: rgba(35,215,125,0.35);
      }
      .btn-ghost{
        width: 100%;
        text-align: left;
        font-weight: 600;
        padding: 10px 12px;
        border-radius: 14px;
      }

      nav.tabs{
        padding: 12px 18px;
        border-bottom: 1px solid rgba(255,255,255,0.08);
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
      }
      .menu-btn{
        border: 1px solid rgba(255,255,255,0.12);
        background: rgba(255,255,255,0.05);
        color: var(--text-1);
        padding: 10px 14px;
        border-radius: 999px;
        cursor: pointer;
        font-weight: 700;
      }
      .menu-btn.active{
        color: var(--text-0);
        background: rgba(186,108,184,0.22);
        border-color: rgba(186,108,184,0.35);
      }

      .section{
        display: none;
        padding: 18px;
      }
      .section.active{ display: block; }

      .grid-2{
        display: grid;
        grid-template-columns: 1.35fr 0.85fr;
        gap: 14px;
        align-items: stretch;
      }

      .panel{
        background: linear-gradient(180deg, rgba(10,8,28,0.65), rgba(10,8,28,0.35));
        border: 1px solid rgba(255,255,255,0.10);
        border-radius: var(--r-lg);
        overflow: hidden;
      }

      .panel-head{
        padding: 14px 14px 10px;
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 12px;
        border-bottom: 1px solid rgba(255,255,255,0.08);
      }
      .panel-head h2{
        margin: 0;
        font-size: 18px;
      }
      .panel-head p{
        margin: 4px 0 0;
        color: var(--text-2);
        font-size: 13px;
      }
      .panel-body{
        padding: 12px 14px 14px;
      }

      /* ---------------------------
         CHAT: BIGGER + MOBILE FRIENDLY
         --------------------------- */
      .chat-top-row{
        display: flex;
        gap: 10px;
        align-items: center;
        justify-content: flex-end;
        flex-wrap: wrap;
        margin-bottom: 10px;
      }

      select.input{
        appearance: none;
        padding-right: 30px;
      }

      .chat-box{
        border: 1px solid rgba(255,255,255,0.10);
        background: rgba(0,0,0,0.18);
        border-radius: 16px;
        padding: 12px;
        overflow-y: auto;

        /* Bigger by default */
        height: 52vh;
        min-height: 380px;
        max-height: 640px;

        scroll-behavior: smooth;
      }

      .bubble-row{
        display: flex;
        margin: 10px 0;
      }
      .bubble-row.user{ justify-content: flex-end; }
      .bubble-row.bot{ justify-content: flex-start; }
      .bubble-row.system{ justify-content: center; }

      .bubble{
        max-width: 78%;
        padding: 12px 12px;
        border-radius: 16px;
        line-height: 1.35;
        font-size: 14.5px;
        white-space: pre-wrap;
        word-break: break-word;
      }

      .bubble.user{
        background: rgba(186,108,184,0.26);
        border: 1px solid rgba(186,108,184,0.35);
      }
      .bubble.bot{
        background: rgba(255,255,255,0.06);
        border: 1px solid rgba(255,255,255,0.12);
      }
      .bubble.system{
        background: rgba(255,90,130,0.10);
        border: 1px solid rgba(255,90,130,0.22);
        color: rgba(255,200,210,0.98);
      }

      /* Sticky input row inside chat panel */
      .chat-input-sticky{
        position: sticky;
        bottom: 0;
        margin-top: 12px;
        padding-top: 10px;
        background: linear-gradient(180deg, rgba(10,8,28,0.10), rgba(10,8,28,0.78));
        border-top: 1px solid rgba(255,255,255,0.08);
        backdrop-filter: blur(10px);
      }

      .chat-input-row{
        display: grid;
        grid-template-columns: 1fr;
        gap: 10px;
      }
      .chat-actions{
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
        justify-content: flex-start;
      }
      .chat-actions .btn{ padding: 10px 16px; border-radius: 999px; }
      .chat-save-row{ margin-top: 10px; }

      /* Saved lists */
      .saved-list{
        display: grid;
        gap: 10px;
      }

      .muted{ color: var(--text-2); }
      .hint{ color: var(--text-2); font-size: 13px; white-space: pre-line; }
      .small{ font-size: 12px; color: var(--text-2); }

      /* ---------------------------
         Responsive
         --------------------------- */
      @media (max-width: 920px){
        .grid-2{ grid-template-columns: 1fr; }
      }

      @media (max-width: 560px){
        .wrap{ width: 94vw; margin: 16px auto 26px; }
        header.app-header{ padding: 14px; }
        .support{ padding: 12px 14px 14px; }
        nav.tabs{ padding: 10px 14px; gap: 8px; }
        .section{ padding: 14px; }

        /* Bigger chat on mobile */
        .chat-box{
          height: 58vh;
          min-height: 420px;
          max-height: none;
        }

        .bubble{
          max-width: 88%;
          font-size: 15.5px;
          padding: 12px 12px;
        }

        .support-row{
          grid-template-columns: 1fr;
        }

        .btn, .menu-btn{
          padding: 11px 14px;
        }
      }
    </style>
  </head>

  <body>
    <div class="wrap">
      <div class="card">
        <header class="app-header">
          <div class="brand">
            <div style="font-size:18px;">üìñ</div>
            <div>
              <h1>Alyana Luz ¬∑ Bible AI</h1>
              <small>pray ¬∑ learn ¬∑ walk in the Light</small>
            </div>
          </div>

          <div class="top-actions">
            <span id="jsStatus" class="pill">JS: ‚Ä¶</span>
          </div>
        </header>

        <div class="support">
          <div class="support-row">
            <button id="supportBtn" class="btn btn-primary" type="button">‚ù§Ô∏è Support Alyana Luz</button>
            <span id="accountPill" class="pill">Account: checking‚Ä¶</span>
            <button id="manageBillingBtn" class="btn" type="button">Manage billing</button>
          </div>

          <p id="supportNote" class="hint">
            Your support helps maintain and grow Alyana Luz ‚Äî continually improving development and expanding this ministry.
            To access premium features, subscribe with Support, or restore access using the email you used on Stripe.
          </p>

          <div style="display:grid;grid-template-columns:1fr auto;gap:10px;margin-top:12px;">
            <input id="loginEmail" class="input" type="email" placeholder="Email used for Stripe‚Ä¶" />
            <button id="loginBtn" class="btn btn-primary" type="button">Restore access</button>
          </div>

          <div id="authHint" class="small" style="display:none;margin-top:10px;"></div>
        </div>

        <nav class="tabs">
          <button class="menu-btn active" id="tabChat" data-target="secChat" type="button">Chat</button>
          <button class="menu-btn" id="tabBible" data-target="secBible" type="button">Read Bible</button>
          <button class="menu-btn" id="tabDev" data-target="secDev" type="button">Devotional</button>
          <button class="menu-btn" id="tabPrayer" data-target="secPrayer" type="button">Daily Prayer</button>
        </nav>

        <!-- CHAT -->
        <section class="section active" id="secChat">
          <div class="grid-2">
            <div class="panel">
              <div class="panel-head">
                <div>
                  <h2 id="chatTitle">Chat</h2>
                  <p id="chatSavedHint">Saved chat logs are stored on this device.</p>
                </div>
                <div style="text-align:right;">
                  <div class="small" id="chatLangLabel" style="margin-bottom:6px;">Chat Language</div>
                  <select id="chatLangSelect" class="input" style="width:220px;">
                    <option value="auto">Auto (based on what they type)</option>
                    <option value="en">English</option>
                    <option value="es">Spanish</option>
                  </select>
                  <div style="margin-top:8px;">
                    <span id="chatVoicePill" class="pill">Voice: ‚Ä¶</span>
                  </div>
                </div>
              </div>

              <div class="panel-body">
                <div id="chat" class="chat-box"></div>

                <div class="chat-input-sticky">
                  <form id="chatForm" class="chat-input-row">
                    <input id="chatInput" class="input" type="text" placeholder="Ask for a prayer, verse, or ‚Äòverses about forgiveness‚Äô‚Ä¶" />
                    <div class="chat-actions">
                      <button id="chatSendBtn" class="btn btn-primary" type="submit">Send</button>
                      <button id="chatListenBtn" class="btn" type="button">Listen</button>
                      <button id="chatStopBtn" class="btn btn-danger" type="button">Stop</button>
                      <button id="chatNewBtn" class="btn" type="button">New</button>
                    </div>

                    <div class="chat-save-row">
                      <button id="chatSaveBtn" class="btn btn-good" type="button">Save</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>

            <div class="panel">
              <div class="panel-head">
                <div>
                  <h2 id="savedChatsTitle">Saved Chats</h2>
                  <p id="savedChatsHint">Load or delete any saved chat.</p>
                </div>
              </div>
              <div class="panel-body">
                <div id="chatSavedList" class="saved-list">
                  <small class="muted">No saved items yet.</small>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- BIBLE -->
        <section class="section" id="secBible">
          <div class="panel">
            <div class="panel-head">
              <div>
                <h2 id="bibleTitle">Bible Reader</h2>
                <p id="bibleHint">Pick a book/chapter and verse range, or Full Chapter.</p>
              </div>
              <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
                <span id="bibleDbStatus" class="pill">DB: ‚Ä¶</span>
              </div>
            </div>

            <div class="panel-body">
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
                <div>
                  <div class="small" id="lblReaderLang">Reader Language</div>
                  <select id="readingVoice" class="input">
                    <option value="en">English (Karen)</option>
                    <option value="es">Espa√±ol (Paulina)</option>
                  </select>
                  <div class="small" id="readerLangNote" style="margin-top:6px;">Only two voices, locked for consistency.</div>
                </div>

                <div>
                  <div class="small" id="lblFullChapter">Full Chapter</div>
                  <label style="display:flex;gap:10px;align-items:center;margin-top:8px;">
                    <input id="fullChapter" type="checkbox" />
                    <span id="fullChapterNote" class="small">If Full Chapter is on, verses are ignored.</span>
                  </label>
                </div>
              </div>

              <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px;">
                <div>
                  <div class="small" id="lblBook">Book</div>
                  <select id="bookSelect" class="input"></select>
                </div>
                <div>
                  <div class="small" id="lblChapter">Chapter</div>
                  <select id="chapterSelect" class="input"></select>
                </div>
              </div>

              <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px;">
                <div>
                  <div class="small" id="lblVerseStart">Verse (start)</div>
                  <select id="verseStartSelect" class="input"></select>
                </div>
                <div>
                  <div class="small" id="lblVerseEnd">Verse (end)</div>
                  <select id="verseEndSelect" class="input"></select>
                </div>
              </div>

              <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:14px;">
                <button id="readBibleBtn" class="btn btn-primary" type="button">Read</button>
                <button id="passageListenBtn" class="btn" type="button">Listen</button>
                <button id="passageStopBtn" class="btn btn-danger" type="button">Stop</button>
              </div>

              <div style="margin-top:16px;" class="panel">
                <div class="panel-head">
                  <div>
                    <h2 id="passageTitle" style="font-size:16px;">Passage</h2>
                    <p class="small" id="passageRef">‚Äî</p>
                  </div>
                </div>
                <div class="panel-body">
                  <div id="passageText" class="hint">‚Äî</div>
                </div>
              </div>

              <div class="small" id="spanishReadNote" style="margin-top:12px;">
                Spanish voice reads ONLY verse text (no English labels), so it stays pure Spanish.
              </div>
            </div>
          </div>
        </section>

        <!-- DEVOTIONAL -->
        <section class="section" id="secDev">
          <div class="panel">
            <div class="panel-head">
              <div>
                <h2 id="devTitle">Devotional</h2>
                <p id="devIntro">Alyana gives short starter examples. You write and save your real devotional.</p>
              </div>
              <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
                <span id="devStreakPill" class="pill">Streak: 0</span>
                <button id="devStreakBtn" class="btn" type="button">I did it today</button>
              </div>
            </div>

            <div class="panel-body">
              <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;">
                <div class="small" id="devLangLabel">Language</div>
                <select id="devUiLang" class="input" style="width:180px;">
                  <option value="en">English</option>
                  <option value="es">Espa√±ol</option>
                </select>
                <button id="devotionalBtn" class="btn btn-primary" type="button">Generate</button>
                <button id="devSaveBtn" class="btn btn-good" type="button">Save</button>
              </div>

              <div style="margin-top:14px;display:grid;gap:12px;">
                <div class="panel">
                  <div class="panel-head"><div><h2 id="devLabelTheme" style="font-size:15px;">Theme / Title (Alyana)</h2></div></div>
                  <div class="panel-body"><div id="devTheme" class="hint">‚Äî</div></div>
                </div>

                <div class="panel">
                  <div class="panel-head"><div><h2 id="devLabelScripture" style="font-size:15px;">Scripture (Alyana)</h2></div></div>
                  <div class="panel-body">
                    <div id="devScriptureRef" class="small">‚Äî</div>
                    <div id="devScriptureText" class="hint" style="margin-top:8px;">‚Äî</div>
                  </div>
                </div>

                <div class="panel">
                  <div class="panel-head"><div><h2 id="devLabelCtxA" style="font-size:15px;">Context / Observation</h2></div></div>
                  <div class="panel-body">
                    <div id="devStarterContext" class="hint">‚Äî</div>
                    <div class="small" id="devNow1" style="margin-top:10px;">Now write yours:</div>
                    <textarea id="devMyContext" class="input" rows="4" placeholder=""></textarea>
                  </div>
                </div>

                <div class="panel">
                  <div class="panel-head"><div><h2 id="devLabelRefA" style="font-size:15px;">Reflection / Insight</h2></div></div>
                  <div class="panel-body">
                    <div id="devStarterReflection" class="hint">‚Äî</div>
                    <div class="small" id="devNow2" style="margin-top:10px;">Now write yours:</div>
                    <textarea id="devMyReflection" class="input" rows="4" placeholder=""></textarea>
                  </div>
                </div>

                <div class="panel">
                  <div class="panel-head"><div><h2 id="devLabelAppA" style="font-size:15px;">Application (Practical)</h2></div></div>
                  <div class="panel-body">
                    <div id="devStarterApplication" class="hint">‚Äî</div>
                    <div class="small" id="devNow3" style="margin-top:10px;">Now write yours:</div>
                    <textarea id="devMyApplication" class="input" rows="4" placeholder=""></textarea>
                  </div>
                </div>

                <div class="panel">
                  <div class="panel-head"><div><h2 id="devLabelPrA" style="font-size:15px;">Prayer</h2></div></div>
                  <div class="panel-body">
                    <div id="devStarterPrayer" class="hint">‚Äî</div>
                    <div class="small" id="devNow4" style="margin-top:10px;">Now write your real prayer:</div>
                    <textarea id="devMyPrayer" class="input" rows="4" placeholder=""></textarea>
                  </div>
                </div>

                <div class="panel">
                  <div class="panel-head"><div><h2 id="devLabelNotes" style="font-size:15px;">Notes / Reflection (optional)</h2></div></div>
                  <div class="panel-body">
                    <textarea id="devMyNotes" class="input" rows="3" placeholder="Notes‚Ä¶"></textarea>
                    <div id="devReqNote" class="small" style="margin-top:8px;">
                      Required to save (streak): Context + Reflection + Application + Prayer.
                    </div>
                  </div>
                </div>

                <div class="panel">
                  <div class="panel-head">
                    <div>
                      <h2 id="devSavedTitle" style="font-size:16px;">Saved Devotionals</h2>
                      <p id="devSavedHint">Load or delete past devotionals saved on this device.</p>
                    </div>
                  </div>
                  <div class="panel-body">
                    <div id="devSavedList" class="saved-list"></div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </section>

        <!-- PRAYER -->
        <section class="section" id="secPrayer">
          <div class="panel">
            <div class="panel-head">
              <div>
                <h2 id="prTitle">Daily Prayer</h2>
                <p id="prIntro">Alyana gives a short starter example. You write and save your real prayer.</p>
              </div>
              <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
                <span id="prStreakPill" class="pill">Streak: 0</span>
                <button id="prStreakBtn" class="btn" type="button">I did it today</button>
              </div>
            </div>

            <div class="panel-body">
              <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;">
                <div class="small" id="prLangLabel">Language</div>
                <select id="prUiLang" class="input" style="width:180px;">
                  <option value="en">English</option>
                  <option value="es">Espa√±ol</option>
                </select>
                <button id="prayerBtn" class="btn btn-primary" type="button">Generate Starters</button>
                <button id="prSaveBtn" class="btn btn-good" type="button">Save</button>
              </div>

              <div style="margin-top:14px;display:grid;gap:12px;">
                <div class="panel">
                  <div class="panel-head"><div><h2 id="prLabelA" style="font-size:15px;">Adoration</h2></div></div>
                  <div class="panel-body">
                    <div id="pA" class="hint">‚Äî</div>
                    <div class="small" id="prNow1" style="margin-top:10px;">Now write your own:</div>
                    <textarea id="myAdoration" class="input" rows="3" placeholder=""></textarea>
                  </div>
                </div>

                <div class="panel">
                  <div class="panel-head"><div><h2 id="prLabelC" style="font-size:15px;">Confession</h2></div></div>
                  <div class="panel-body">
                    <div id="pC" class="hint">‚Äî</div>
                    <div class="small" id="prNow2" style="margin-top:10px;">Now write your own:</div>
                    <textarea id="myConfession" class="input" rows="3" placeholder=""></textarea>
                  </div>
                </div>

                <div class="panel">
                  <div class="panel-head"><div><h2 id="prLabelT" style="font-size:15px;">Thanksgiving</h2></div></div>
                  <div class="panel-body">
                    <div id="pT" class="hint">‚Äî</div>
                    <div class="small" id="prNow3" style="margin-top:10px;">Now write your own:</div>
                    <textarea id="myThanksgiving" class="input" rows="3" placeholder=""></textarea>
                  </div>
                </div>

                <div class="panel">
                  <div class="panel-head"><div><h2 id="prLabelS" style="font-size:15px;">Supplication</h2></div></div>
                  <div class="panel-body">
                    <div id="pS" class="hint">‚Äî</div>
                    <div class="small" id="prNow4" style="margin-top:10px;">Now write your own:</div>
                    <textarea id="mySupplication" class="input" rows="3" placeholder=""></textarea>
                  </div>
                </div>

                <div class="panel">
                  <div class="panel-head"><div><h2 id="prLabelN" style="font-size:15px;">Notes</h2></div></div>
                  <div class="panel-body">
                    <textarea id="prayerNotes" class="input" rows="3" placeholder="Notes‚Ä¶"></textarea>
                  </div>
                </div>

                <div class="panel">
                  <div class="panel-head">
                    <div>
                      <h2 id="prSavedTitle" style="font-size:16px;">Saved Prayers</h2>
                      <p id="prSavedHint">Load or delete past prayers saved on this device.</p>
                    </div>
                  </div>
                  <div class="panel-body">
                    <div id="prSavedList" class="saved-list"></div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </section>

      </div>
    </div>

    <script src="/app.js" defer></script>
  </body>
</html>




